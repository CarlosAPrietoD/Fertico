<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--================================Reporte de estado contable======================================-->

    <!--Plantilla-->
    <template id="report_account_status">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <br />
                <div style="width: 100%;">
                    <table style="width: 100%;">
                        <tr>
                            <td style="text-align:center; padding: 5px">
                                Cliente
                            </td>
                            <th style="text-align:center; padding: 5px; color: white; background: black;">
                                <t t-esc="docs['partner_id'].name" />
                            </th>
                            <td style="text-align:right; padding: 5px">
                                Ciclo:
                            </td>
                            <th style="padding: 5px; width: min-content">
                                <t t-esc="data['cycle'].name" />
                            </th>
                        </tr>
                    </table>
                    <br />
                    <br />
                    <table style="width: 100%;">
                        <tr>
                            <td style="width: 50%"></td>
                            <td style="width: 50%">
                                <table style="width: 100%; text-align: left;">
                                    <tr>
                                        <th style="text-align:right; padding-right: 5px; padding-top: 10px">
                                            Crédito autorizado
                                        </th>
                                        <td style="text-align:center; border-bottom: black 1px solid; padding-top: 10px">
                                            $
                                            <t t-esc="data['authorized']" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right; padding-right: 5px; padding-top: 10px">
                                            Seguro agrícola
                                        </th>
                                        <td style="text-align:center; border-bottom: black 1px solid; padding-top: 10px">
                                            $
                                            <t t-esc="data['insurance']" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right; padding-right: 5px; padding-top: 10px">
                                            Total producto
                                        </th>
                                        <td style="text-align:center; border-bottom: black 1px solid; padding-top: 10px">
                                            $
                                            <t t-esc="data['sum_invoices']" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right; padding-right: 5px; padding-top: 10px">
                                            Total intereses
                                        </th>
                                        <td style="text-align:center; border-bottom: black 1px solid; padding-top: 10px">
                                            $
                                            <t t-esc="data['sum_interest']" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right; padding-right: 5px; padding-top: 10px">
                                            Tasa fija
                                        </th>
                                        <td style="text-align:center; border-bottom: black 1px solid; padding-top: 10px">
                                            <t t-esc="data['interest']" />
                                            %
                                        </td>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right; color: rgb(18, 110, 214); padding-right: 5px; padding-top: 10px">
                                            Total a pagar
                                        </th>
                                        <th style="text-align:center; border-bottom: black 1px solid; padding-top: 10px; color: rgb(18, 110, 214)">
                                            $
                                            <t t-esc="data['total']" />
                                        </th>
                                    </tr>
                                    <tr>
                                        <th style="text-align:right; padding-right: 5px; padding-top: 10px">
                                            Fecha de pago
                                        </th>
                                        <td style="text-align:center; border-bottom: black 1px solid; padding-top: 10px">
                                            <t t-esc="data['date']" />
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>

                    <br />
                    <table style="width: 100%; text-align: left;">
                        <tr style="background: gray;">
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Factura
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Fecha
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Total factura
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Fecha de pago
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Dias naturales
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Dias moratorios
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Interes
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Interes moratorio
                            </th>
                            <th style="text-align:center; border: black 1px solid; padding: 5px">
                                Suma total a pagar
                            </th>
                        </tr>
                        <tr t-foreach="invoices" t-as="invoice">
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                <t t-esc="invoice['number']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                <t t-esc="invoice['date']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                $
                                <t t-esc="invoice['amount']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                <t t-esc="invoice['date_payment']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                <t t-esc="invoice['days_nat']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                <t t-esc="invoice['days_mo']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                $
                                <t t-esc="invoice['interest']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                $
                                <t t-esc="invoice['interest_mo']" />
                            </td>
                            <td style="text-align:center; border: black 1px solid; padding: 5px">
                                $
                                <t t-esc="invoice['total']" />
                            </td>
                        </tr>
                    </table>
                </div>
            </t>
        </t>
    </template>


    <!--Reporte-->
    <report id="report_credit_account_status" model="credit.account.status" string="Estado de cuenta" report_type="qweb-html" name="wobin_credit.report_account_status" />

    <!--Ventana de ingreso de datos-->
    <record model="ir.ui.view" id="report_data_account_status">
        <field name="name">Estado de cuenta</field>
        <field name="model">credit.account.status</field>
        <field name="type">form</field>
        <field name="arch" type="xml">
            <form>
                <group>
                    <group>
                        <field name="partner_id" />
                    </group>
                </group>
                <footer>
                    <button string="Cancel" special="cancel" class="oe_highlight" />
                    <button name="%(wobin_credit.report_credit_account_status)d" string="Submit" type="action" class="oe_highlight" />
                </footer>
            </form>
        </field>
    </record>

    <!--Accion para la ventana emergente-->
    <act_window id="action_account_status" name="Selecciona el cliente" res_model="credit.account.status" view_mode="form" target="new" multi="True" />

    <!--Menu-->
    <menuitem id="menu_account_status" name="Estado de cuenta" parent="wobin_credit.reports_menu" action="action_account_status" />


    <!--==========================================Carta compromiso=======================================-->

    <!--Plantilla-->
    <template id="report_commitment">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div style="width: 100%; text-align: right; padding-right: 10%;">
                    <label>Fecha: <u>  <t t-esc="date" />  </u></label>
                </div>
                <br />
                <br />
                <br />
                <div style="width: 100%; text-align: justify;">
                    
                    <br/>
                    <br/>
                    <br/>
                    <p style="padding-left: 10%; padding-right: 10%;">
                        En solicitud al trámite de Crédito Agrario para obtención de insumos agrícolas en esta empresa para el ciclo <b><t t-esc="docs['cycle'].name" /></b>, yo <u><b><t t-esc="docs['partner_id'].name" /></b></u> estoy en acuerdo y me comprometo a cumplir las siguientes políticas establecidas por la empresa para la autorización del crédito solicitado:
                    </p>
                    <br/>
                    <ul style="padding-left: 20%; padding-right: 10%;">
                        <li>Entregar la documentación requerida completa y en tiempo.</li>
                        <br/>
                        <li>Asumir el <b>COMPROMISO</b> de entrega de grano de la cosecha del ciclo <t t-esc="docs['cycle'].name" />, para la liquidación total del crédito.</li>
                        <br/>
                        <li>Pagar el <b>SEGURO AGRÍCOLA</b> correspondiente al total de la superficie solicitada a acreditar.</li>
                    </ul>
                    <br/>
                    <p style="padding-left: 10%; padding-right: 10%;">
                        Confío que este será el inicio de una excelente relación comercial.
                    </p>
                </div>
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
                <div style="width: 100%; text-align: center;">
                    <label>Atentamente</label>
                    <br />
                    <br />
                    <br />
                    <label style="width: 400px; border-bottom: black 1px solid"></label>
                    <br />
                    <label>Nombre completo y firma del solicitante</label>
                </div>
            </t>
        </t>
    </template>

    <!--Reporte-->
    <report id="report_credit_commitment" model="credit.record" string="Carta compromiso" report_type="qweb-html" name="wobin_credit.report_commitment" menu="False"/>

    <!--==========================================Solicitud=======================================-->

    <!--Plantilla-->
    <template id="report_application">
        <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <div style="width: 100%; text-align: right; padding-right: 10%;">
                    <label>Fecha: <u>  <t t-esc="date" />  </u></label>
                </div>
                <br />
                <br />
                <br />
                <div style="width: 100%; text-align: justify;">
                    
                    <br/>
                    <br/>
                    <br/>
                    <p style="padding-left: 10%; padding-right: 10%;">
                        En solicitud al trámite de Crédito Agrario para obtención de insumos agrícolas en esta empresa para el ciclo <b><t t-esc="docs['cycle'].name" /></b>, yo <u><b><t t-esc="docs['partner_id'].name" /></b></u> estoy en acuerdo y me comprometo a cumplir las siguientes políticas establecidas por la empresa para la autorización del crédito solicitado:
                    </p>
                    <br/>
                    <ul style="padding-left: 20%; padding-right: 10%;">
                        <li>Entregar la documentación requerida completa y en tiempo.</li>
                        <br/>
                        <li>Asumir el <b>COMPROMISO</b> de entrega de grano de la cosecha del ciclo <t t-esc="docs['cycle'].name" />, para la liquidación total del crédito.</li>
                        <br/>
                        <li>Pagar el <b>SEGURO AGRÍCOLA</b> correspondiente al total de la superficie solicitada a acreditar.</li>
                    </ul>
                    <br/>
                    <p style="padding-left: 10%; padding-right: 10%;">
                        Confío que este será el inicio de una excelente relación comercial.
                    </p>
                </div>
                <br />
                <br />
                <br />
                <br />
                <br />
                <br />
                <div style="width: 100%; text-align: center;">
                    <label>Atentamente</label>
                    <br />
                    <br />
                    <br />
                    <label style="width: 400px; border-bottom: black 1px solid"></label>
                    <br />
                    <label>Nombre completo y firma del solicitante</label>
                </div>
            </t>
        </t>
    </template>

    <!--Reporte-->
    <report id="report_credit_application" model="credit.preapplication" string="Carta compromiso" report_type="qweb-html" name="wobin_credit.report_application" menu="False"/>

</odoo>